Данный скрипт позволяет парсить лог файлы Nginx.

1) Для запуска скрипта необходимо указать путь для лог файла или директорию, где находятся лог файлы с указанием флага -f или --file. Пример запуска скрипта:
python3 python_script.py -f ../logs --json

2) Для сохранения полученной информации в формате JSON необходимо указать флаг -j или --json.

3) В случае обработки нейскольких файлов полученная ифнормация сохраняется в файлы имеющие следующий формат названия:
"info_[номер_файла_в_порядке_обработки]_[название_файла]"
В случае обработки одного файла:
"info_[название_файла]"
В случае указания флага json, полученный json сохраняется в файле с названием:
"json_[номер_файла_в_порядке_обработки]_[название_файла]"
В случае обработки одного файла:
"json_[название_файла]"

4) Делимитером при записи в файл является следующая последовательность символов:
------------------------------------
Данная последовательность отделяет полученную информацию для каждого таска.

5) В случае обнаружения ошибки при выполнении скрипта будет вызвано прерывание с указанием причины.

6) Полученная инормация хранится в файле в следующем формате:
51462
------------------------------------
GET 51379
HEAD 83
------------------------------------
GET /downloads/product_1 5.9.121.211 01/Jun/2015:20:06:53 86377168
GET /downloads/product_1 2a01:7e00::f03c:91ff:fe70:a4cc 18/May/2015:16:05:29 86166026
GET /downloads/product_1 74.205.117.244 17/May/2015:23:05:29 85619205
GET /downloads/product_1 54.175.18.186 18/May/2015:04:05:18 85619205
GET /downloads/product_1 54.239.240.49 18/May/2015:07:05:47 85619205
GET /downloads/product_1 107.23.7.76 18/May/2015:09:05:48 85619205
GET /downloads/product_1 107.23.7.76 18/May/2015:16:05:28 85619205
GET /downloads/product_1 2001:4801:7824:102:8bee:6e66:ff10:6aa2 18/May/2015:16:05:29 85619205
GET /downloads/product_1 2001:4802:7801:102:8bee:6e66:ff20:3db9 18/May/2015:18:05:04 85619205
GET /downloads/product_1 107.23.7.76 18/May/2015:19:05:06 85619205
------------------------------------
GET /downloads/product_2 404 217.168.17.5
GET /downloads/product_1 404 217.168.17.5
GET /downloads/product_1 404 46.4.66.76
GET /downloads/product_1 404 93.180.71.3
GET /downloads/product_2 404 37.26.93.214
GET /downloads/product_1 404 93.180.71.3
GET /downloads/product_1 404 80.91.33.133
GET /downloads/product_1 404 93.180.71.3
GET /downloads/product_1 404 173.203.139.108
GET /downloads/product_1 404 173.203.139.108
------------------------------------

7) Полученный JSON хранится в файле в следующем формате:
{"task1": 51462,
"task2": {"GET": 51379, "HEAD": 83},
"task3": [["GET", "/downloads/product_1", "5.9.121.211", "01/Jun/2015:20:06:53", "86377168"],
          ["GET", "/downloads/product_1", "2a01:7e00::f03c:91ff:fe70:a4cc", "18/May/2015:16:05:29", "86166026"],
          ["GET", "/downloads/product_1", "74.205.117.244", "17/May/2015:23:05:29", "85619205"],
          ["GET", "/downloads/product_1", "54.175.18.186", "18/May/2015:04:05:18", "85619205"],
          ["GET", "/downloads/product_1", "54.239.240.49", "18/May/2015:07:05:47", "85619205"],
          ["GET", "/downloads/product_1", "107.23.7.76", "18/May/2015:09:05:48", "85619205"],
          ["GET", "/downloads/product_1", "107.23.7.76", "18/May/2015:16:05:28", "85619205"],
          ["GET", "/downloads/product_1", "2001:4801:7824:102:8bee:6e66:ff10:6aa2", "18/May/2015:16:05:29", "85619205"],
          ["GET", "/downloads/product_1", "2001:4802:7801:102:8bee:6e66:ff20:3db9", "18/May/2015:18:05:04", "85619205"],
          ["GET", "/downloads/product_1", "107.23.7.76", "18/May/2015:19:05:06", "85619205"]],
"task4": [["GET", "/downloads/product_2", "404", "217.168.17.5"],
          ["GET", "/downloads/product_1", "404", "217.168.17.5"],
          ["GET", "/downloads/product_1", "404", "46.4.66.76"],
          ["GET", "/downloads/product_1", "404", "93.180.71.3"],
          ["GET", "/downloads/product_2", "404", "37.26.93.214"],
          ["GET", "/downloads/product_1", "404", "93.180.71.3"],
          ["GET", "/downloads/product_1", "404", "80.91.33.133"],
          ["GET", "/downloads/product_1", "404", "93.180.71.3"],
          ["GET", "/downloads/product_1", "404", "173.203.139.108"],
          ["GET", "/downloads/product_1", "404", "173.203.139.108"]],
 "task5": []}
